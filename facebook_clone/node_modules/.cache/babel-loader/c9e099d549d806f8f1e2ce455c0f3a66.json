{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amans\\\\OneDrive\\\\Desktop\\\\react_Projects\\\\facebook_clone\\\\facebook_clone\\\\src\\\\Components\\\\MessageSender.js\";\nimport React, { useState } from 'react';\nimport { Avatar, Button } from '@material-ui/core';\nimport \"./MessageSender.css\";\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\nimport { useStateValue } from '../StateProvider';\nimport axios from '../axios';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\n\nconst MessageSender = () => {\n  const [input, setInput] = useState('');\n  const [imageUrl, setImageUrl] = useState('');\n  const [image, setImage] = useState(null);\n  const [{\n    user\n  }, dispatch] = useStateValue();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    handleClose();\n\n    if (image) {\n      const imgForm = new FormData();\n      imgForm.append('file', image, image.name);\n      axios.post('/upload/image', imgForm, {\n        headers: {\n          'accept': 'application/json',\n          'Accept-Language': 'en-US,en;q=0.8',\n          'Content-Type': `multipart/form-dat; boundary=${imgForm._boundary}`\n        }\n      }).then(res => {\n        console.log(res.data);\n        const postData = {\n          text: input,\n          imgName: res.data.filename,\n          user: user.displayName,\n          avatar: user.photoURL,\n          timestamp: Date.now()\n        };\n        console.log(postData);\n        savePost(postData);\n      });\n    } else {\n      const postData = {\n        text: input,\n        user: user.displayName,\n        avatar: user.photoURL,\n        timestamp: Date.now()\n      };\n      console.log(postData);\n      savePost(postData);\n    }\n\n    setImageUrl('');\n    setInput('');\n    setImage(null);\n  };\n\n  debugger;\n\n  const savePost = async postData => {\n    await axios.post('/upload/post', postData).then(resp => {\n      console.log(resp);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender_top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: user.photoURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender_input\",\n    placeholder: \"what's in your mind\",\n    role: \"button\",\n    onClick: handleClickOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"input_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, \"What's in your mind\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender_bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender_option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(VideocamIcon, {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, \"Live Video\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender_option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(PhotoLibraryIcon, {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, \"Photo/Video\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messageSender_option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InsertEmoticonIcon, {\n    style: {\n      color: 'orange'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, \"Feeling/Activity\"))), /*#__PURE__*/React.createElement(Dialog, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    style: {\n      paddingRight: \"15px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dialog_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontWeight: \"600\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Create post\"), /*#__PURE__*/React.createElement(CancelIcon, {\n    className: \"dialog_icon\",\n    style: {\n      fontSize: \"40px\"\n    },\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dialog_bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dialog_info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, \"Aman Singh\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(SupervisorAccountIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 26\n    }\n  }), /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 50\n    }\n  }, \"Friends\"))))), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    className: \"dialog_mid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"What's on your mind \",\n    onChange: e => setInput(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 16\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dialog_upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dialog_action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, \"Post\")))));\n};\n\nexport default MessageSender;","map":{"version":3,"sources":["C:/Users/amans/OneDrive/Desktop/react_Projects/facebook_clone/facebook_clone/src/Components/MessageSender.js"],"names":["React","useState","Avatar","Button","VideocamIcon","PhotoLibraryIcon","InsertEmoticonIcon","useStateValue","axios","Dialog","DialogContent","DialogContentText","DialogTitle","CancelIcon","SupervisorAccountIcon","MessageSender","input","setInput","imageUrl","setImageUrl","image","setImage","user","dispatch","open","setOpen","handleClickOpen","handleClose","handleChange","e","target","files","handleSubmit","preventDefault","imgForm","FormData","append","name","post","headers","_boundary","then","res","console","log","data","postData","text","imgName","filename","displayName","avatar","photoURL","timestamp","Date","now","savePost","resp","color","paddingRight","fontWeight","fontSize","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\r\nimport {Avatar, Button} from '@material-ui/core'\r\nimport \"./MessageSender.css\"\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\"\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary'\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon'\r\nimport {useStateValue} from '../StateProvider'\r\nimport axios from '../axios'\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\r\n\r\nconst MessageSender = () => {\r\n    const [input, setInput] = useState('')\r\n    const [imageUrl, setImageUrl] = useState('')\r\n    const [image, setImage] = useState(null)\r\n    const[{user}, dispatch] = useStateValue()\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n      };\r\n    \r\n      const handleClose = () => {\r\n        setOpen(false);\r\n      };\r\n\r\n    const handleChange = (e) => {\r\n         if(e.target.files[0]){\r\n             setImage(e.target.files[0])\r\n         }\r\n     }\r\n\r\n     const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        handleClose()\r\n         if(image) {\r\n             const imgForm = new FormData()\r\n             imgForm.append('file', image, image.name)\r\n\r\n             axios.post('/upload/image', imgForm, {\r\n                 headers: {\r\n                     'accept': 'application/json',\r\n                     'Accept-Language': 'en-US,en;q=0.8',\r\n                     'Content-Type' : `multipart/form-dat; boundary=${imgForm._boundary}`\r\n                 }\r\n             }).then((res) => {\r\n                 console.log(res.data)\r\n\r\n                 const postData = {\r\n                     text: input,\r\n                     imgName: res.data.filename,\r\n                     user: user.displayName,\r\n                     avatar: user.photoURL,\r\n                     timestamp: Date.now()\r\n                 }\r\n                 console.log(postData)\r\n                 savePost(postData)\r\n             })\r\n         }else {\r\n             const postData = {\r\n                 text: input,\r\n                 user:user.displayName,\r\n                 avatar:user.photoURL,\r\n                 timestamp: Date.now()\r\n             }\r\n             console.log(postData)\r\n             savePost(postData)\r\n         }\r\n\r\n         setImageUrl('')\r\n         setInput('')\r\n         setImage(null)\r\n     }\r\n     debugger;\r\n     const savePost = async (postData) => {\r\n         await axios.post('/upload/post', postData)\r\n                .then((resp) => {\r\n                    console.log(resp)\r\n                })\r\n     }\r\n\r\n    return (\r\n        <div className = \"messageSender\">\r\n            <div className = \"messageSender_top\">\r\n                <Avatar \r\n                src = {user.photoURL} />\r\n                \r\n                    <div \r\n                    className=\"messageSender_input\" \r\n                    placeholder=\"what's in your mind\"\r\n                    role=\"button\"\r\n                    onClick={handleClickOpen}\r\n                    >\r\n                        <strong className=\"input_text\">What's in your mind</strong>\r\n                    </div>   \r\n            </div>\r\n\r\n            <div className = \"messageSender_bottom\">\r\n                <div className = \"messageSender_option\">\r\n                    <VideocamIcon style= {{color: 'red'}}/>\r\n                    <h3>Live Video</h3>\r\n                </div>\r\n                <div className = \"messageSender_option\">\r\n                    <PhotoLibraryIcon style= {{color: 'green'}}/>\r\n                    <h3>Photo/Video</h3>\r\n                </div>\r\n                <div className = \"messageSender_option\">\r\n                    <InsertEmoticonIcon style= {{color: 'orange'}}/>\r\n                    <h3>Feeling/Activity</h3>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n            \r\n            <DialogTitle id=\"form-dialog-title\" style= {{paddingRight: \"15px\"}}>\r\n            <div className = \"dialog_title\">\r\n            <span style={{fontWeight: \"600\"}}>Create post</span> \r\n            <CancelIcon className=\"dialog_icon\" style = {{fontSize: \"40px\"}} onClick={handleClose}/>\r\n            </div>\r\n            <div className = \"dialog_bottom\">\r\n                <Avatar/>\r\n                <div className = \"dialog_info\">\r\n                    <h5>Aman Singh</h5>\r\n                    <div><SupervisorAccountIcon/><h6>Friends</h6></div>\r\n                </div>\r\n            </div>\r\n            </DialogTitle>\r\n        <form>\r\n        <DialogContent>\r\n          <DialogContentText className = \"dialog_mid\">\r\n               <textarea placeholder = \"What's on your mind \" onChange = {(e) => setInput(e.target.value)}></textarea>\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <div className = \"dialog_upload\">\r\n            <input type=\"file\" onChange = {handleChange}>\r\n            </input>\r\n        </div>\r\n        <div className = \"dialog_action\">\r\n          <button onClick = {handleSubmit}>\r\n            Post\r\n          </button>\r\n        </div>\r\n        </form>\r\n      </Dialog>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MessageSender\r\n"]},"metadata":{},"sourceType":"module"}